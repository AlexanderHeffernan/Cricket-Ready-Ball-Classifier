(function(){"use strict";var e={7716:function(e,a,r){var t=r(3751),n=r(641),o=r(33);const l={class:"loading-animation",width:"150",height:"150",viewBox:"0 0 150 150",role:"img","aria-label":"Cricket loading animation"};function i(e,a){return(0,n.uX)(),(0,n.CE)("svg",l,a[0]||(a[0]=[(0,n.Fv)('<g transform="translate(45, 30)" data-v-e2b23a0c><rect x="15" y="10" width="6" height="65" rx="3" ry="3" fill="#000" data-v-e2b23a0c></rect><rect x="27" y="10" width="6" height="65" rx="3" ry="3" fill="#000" data-v-e2b23a0c></rect><rect x="39" y="10" width="6" height="65" rx="3" ry="3" fill="#000" data-v-e2b23a0c></rect><g id="bat-group" data-v-e2b23a0c><rect x="55" y="0" width="60" height="16" rx="3" ry="3" fill="#fff" stroke="#000" stroke-width="5" data-v-e2b23a0c></rect><rect x="40" y="4.5" width="18" height="7" rx="2" ry="2" fill="#fff" stroke="#000" stroke-width="5" data-v-e2b23a0c></rect></g><circle id="ball" cx="1" cy="37" r="7" fill="#fff" stroke="#000" stroke-width="5" data-v-e2b23a0c></circle></g>',1)]))}var s=r(6262);const c={},u=(0,s.A)(c,[["render",i],["__scopeId","data-v-e2b23a0c"]]);var d=u,v=r(953),p=r.p+"img/background.fcd33fbd.jpg";const g={class:"loading-icon"},h={class:"app-container"};var f=(0,n.pM)({__name:"App",setup(e){const a=(0,v.KR)(!1),r=(0,v.KR)(!1),t=(0,v.KR)(!1);function l(){a.value&&r.value&&(t.value=!0,document.documentElement.style.setProperty("--background-img",`url(${p})`))}function i(){r.value=!0,l()}return(0,n.sV)(()=>{const e=new window.Image;e.src=p,e.onload=()=>{a.value=!0,l()},navigator.mediaDevices.getUserMedia({video:!0}).then(()=>{}).catch(()=>{r.value=!0,l()})}),(e,a)=>{const r=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",{class:(0,o.C4)(["loading-overlay",{complete:t.value}])},[a[0]||(a[0]=(0,n.Lk)("div",{class:"slide left-slide"},null,-1)),a[1]||(a[1]=(0,n.Lk)("div",{class:"slide right-slide"},null,-1)),(0,n.Lk)("div",g,[(0,n.bF)(d)])],2),a[2]||(a[2]=(0,n.Lk)("div",{class:"background-image"},null,-1)),a[3]||(a[3]=(0,n.Lk)("div",{class:"background-overlay"},null,-1)),(0,n.Lk)("div",h,[(0,n.bF)(r,{onCameraReady:i})])])}}});const y=f;var m=y,k=r(3723);(0,k.k)("/Cricket-Ready-Ball-Classifier/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var b=r(5220);r(8111),r(7588);const w={class:"camera-capture"},C={class:"camera-container"},R={key:0,class:"captured-overlay"},L=["src"],E={key:1,class:"error-content"},_={class:"error-message"},P={key:0,class:"capture-container"},T=["disabled"];var x=(0,n.pM)({__name:"CameraComponent",props:{isLoading:{type:Boolean,default:!1},glowClass:{default:""},error:{}},emits:["captured","cameraError","retry","ready"],setup(e,{expose:a,emit:r}){const t=r,l=(0,v.KR)(),i=(0,v.KR)(),s=(0,v.KR)(null),c=(0,v.KR)(null);(0,n.sV)(()=>{u(),l.value?.addEventListener("playing",()=>t("ready"))}),(0,n.hi)(()=>c.value?.getTracks().forEach(e=>e.stop()));const u=async()=>{try{if("https:"!==location.protocol&&"localhost"!==location.hostname)return t("cameraError","Camera access requires HTTPS or localhost.");if(!navigator.mediaDevices?.getUserMedia)return t("cameraError","Camera not supported in this browser.");const e=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}}});if(c.value=e,!l.value)return;l.value.srcObject=e,l.value.setAttribute("playsinline","true"),await l.value.play()}catch(e){const a=e,r={NotAllowedError:"Camera access denied. Please allow permissions.",NotFoundError:"No camera found.",NotSupportedError:"Camera requires HTTPS."};console.error("Camera initialization error:",e),t("cameraError",r[a.name]||`Failed to access camera: ${a.message}`)}},p=async()=>{if(!l.value||!i.value)return;const e=i.value,a=l.value,r=e.getContext("2d");if(!r)return;const n=a.getBoundingClientRect(),o=Math.min(a.videoWidth/n.width,a.videoHeight/n.height)*Math.min(n.width,n.height)/2,c=2*o;e.width=e.height=c,r.clearRect(0,0,c,c),r.save(),r.beginPath(),r.arc(c/2,c/2,o,0,2*Math.PI),r.clip(),r.drawImage(a,a.videoWidth/2-o,a.videoHeight/2-o,c,c,0,0,c,c),r.restore();const u=e.toDataURL("image/png");s.value=u,t("captured",e,u)},g=()=>s.value=null;return a({reset:g}),(e,a)=>((0,n.uX)(),(0,n.CE)("div",w,[(0,n.Lk)("div",C,[(0,n.Lk)("video",{ref_key:"cameraStream",ref:l,id:"camera-stream",muted:"",playsinline:"","webkit-playsinline":"true","x-website-airplay":"deny",preload:"auto",class:(0,o.C4)({hidden:s.value}),"aria-label":"Live camera stream"},null,2),s.value?((0,n.uX)(),(0,n.CE)("div",R,[(0,n.Lk)("img",{src:s.value,alt:"Captured Image",class:"captured-image-overlay"},null,8,L)])):(0,n.Q3)("",!0),(0,n.Lk)("div",{class:(0,o.C4)(["overlay",{loading:e.isLoading,error:e.error}])},[e.isLoading?((0,n.uX)(),(0,n.Wv)(d,{key:0})):(0,n.Q3)("",!0),e.error?((0,n.uX)(),(0,n.CE)("div",E,[a[1]||(a[1]=(0,n.Lk)("div",{class:"error-icon"},"❌",-1)),(0,n.Lk)("p",_,(0,o.v_)(e.error),1)])):(0,n.Q3)("",!0)],2),e.glowClass?((0,n.uX)(),(0,n.CE)("div",{key:1,class:(0,o.C4)(["glow-effect",e.glowClass])},null,2)):(0,n.Q3)("",!0)]),(0,n.Lk)("canvas",{ref_key:"cameraCanvas",ref:i,style:{display:"none"}},null,512),!s.value||e.error?((0,n.uX)(),(0,n.CE)("div",P,[e.error?((0,n.uX)(),(0,n.CE)("button",{key:1,onClick:a[0]||(a[0]=a=>e.$emit("retry")),class:"retry button"}," Retry ")):((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:p,class:"capture button",disabled:e.isLoading,"aria-label":"Capture photo"}," Capture Photo ",8,T))])):(0,n.Q3)("",!0)]))}});const O=(0,s.A)(x,[["__scopeId","data-v-4b189527"]]);var A=O;const B={class:"cricket-view"},K={class:"mode-selector"},M={class:"prediction-result"},N={class:"confidence-text"},j={key:1,class:"label-container"},X={class:"label-buttons"},F={key:2,class:"success-container"};var D=(0,n.pM)({__name:"PredictView",emits:["camera-ready"],setup(e,{emit:a}){const r=a;function t(){r("camera-ready")}const l=(0,v.KR)("predict"),i=(0,v.KR)(!1),s=(0,v.KR)(null),c=(0,v.KR)(null),u=(0,v.KR)(!1),d=(0,v.KR)(null),p=(0,v.KR)(),g=(0,v.KR)(),h=(0,n.EW)(()=>"predict"===l.value?"Take a photo and we will determine if your ball is match ready.":"Help improve our classifier by taking photos and labeling them."),f=(0,n.EW)(()=>"predict"===l.value&&c.value?"match_ready"===c.value.prediction?"match-ready":"not-match-ready":""),y=async()=>{await(0,n.dY)(),g.value&&g.value.scrollIntoView({behavior:"smooth",block:"start"})},m=(e,a)=>{d.value={canvas:e,imageDataUrl:a},"predict"===l.value&&b(e)},k=e=>{s.value=e},b=async e=>{try{i.value=!0,s.value=null;const a=await new Promise(a=>{e.toBlob(e=>{e&&a(e)},"image/jpeg",.8)}),r=new FormData;r.append("image",a,"captured-image.jpg");const t=await fetch(`${{NODE_ENV:"production",BASE_URL:"/Cricket-Ready-Ball-Classifier/"}.VUE_APP_BACKEND_URL}/predict`,{method:"POST",headers:{"ngrok-skip-browser-warning":"true"},body:r});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);c.value=await t.json(),await y()}catch(a){console.error("Prediction error:",s);const e=a;"TypeError"===e.name&&e.message.includes("Load failed")?s.value="ERROR: Backend service unavailable. Please try again later.":s.value="ERROR: Failed to analyze image. Please try again."}finally{i.value=!1}},w=async e=>{if(d.value)try{i.value=!0,s.value=null;const a=await new Promise(e=>{d.value&&d.value.canvas.toBlob(a=>{a&&e(a)},"image/jpeg",.8)}),r=new FormData;r.append("image",a,"training-image.jpg"),r.append("label",e);const t=await fetch(`${{NODE_ENV:"production",BASE_URL:"/Cricket-Ready-Ball-Classifier/"}.VUE_APP_BACKEND_URL}/training`,{method:"POST",headers:{"ngrok-skip-browser-warning":"true"},body:r});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);u.value=!0}catch(a){console.error("Training error:",s);const e=a;"TypeError"===e.name&&e.message.includes("Load failed")?s.value="ERROR: Backend service unavailable. Please try again later.":s.value="ERROR: Failed to submit training data. Please try again."}finally{i.value=!1}},C=()=>{d.value=null,c.value=null,u.value=!1,s.value=null,i.value=!1,p.value?.reset()},R=async()=>{s.value=null,await new Promise(e=>setTimeout(e,500)),"predict"===l.value&&d.value?b(d.value.canvas):l.value},L=()=>{d.value&&b(d.value.canvas)};return(e,a)=>((0,n.uX)(),(0,n.CE)("div",B,[(0,n.Lk)("div",K,[(0,n.Lk)("button",{onClick:a[0]||(a[0]=e=>l.value="predict"),class:(0,o.C4)({active:"predict"===l.value})}," Predict ",2),(0,n.Lk)("button",{onClick:a[1]||(a[1]=e=>l.value="train"),class:(0,o.C4)({active:"train"===l.value})}," Train ",2)]),(0,n.Lk)("h1",null,(0,o.v_)("predict"===l.value?"Is your ball Cricket-Ready?":"Training Tool"),1),(0,n.Lk)("p",null,(0,o.v_)(h.value),1),(0,n.bF)(A,{"is-loading":i.value,"glow-class":f.value,error:s.value,"show-retry":!!s.value,onCaptured:m,onCameraError:k,onRetry:R,onReady:t,ref_key:"camera",ref:p},null,8,["is-loading","glow-class","error","show-retry"]),"predict"===l.value&&c.value?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"result-container",ref_key:"resultContainer",ref:g},[a[5]||(a[5]=(0,n.Lk)("h2",null,"Result:",-1)),(0,n.Lk)("div",M,[(0,n.Lk)("p",{class:(0,o.C4)(["prediction-text",c.value.prediction])},[a[4]||(a[4]=(0,n.eW)(" Your ball is: ")),(0,n.Lk)("strong",null,(0,o.v_)("match_ready"===c.value.prediction?"Match Ready":"Not Match Ready"),1)],2),(0,n.Lk)("p",N," Confidence: "+(0,o.v_)(Math.round(100*c.value.confidence))+"% ",1)]),(0,n.Lk)("div",{class:"action-buttons"},[(0,n.Lk)("button",{onClick:C,class:"action-btn primary"},"Take Another Photo"),(0,n.Lk)("button",{onClick:L,class:"action-btn secondary"},"Retry Analysis")])],512)):(0,n.Q3)("",!0),"train"===l.value&&d.value&&!u.value?((0,n.uX)(),(0,n.CE)("div",j,[a[6]||(a[6]=(0,n.Lk)("h3",null,"Is this ball match-ready?",-1)),(0,n.Lk)("div",X,[(0,n.Lk)("button",{onClick:a[2]||(a[2]=e=>w("match_ready")),class:"label-btn match-ready"}," ✓ Match Ready "),(0,n.Lk)("button",{onClick:a[3]||(a[3]=e=>w("not_match_ready")),class:"label-btn not-match-ready"}," ✗ Not Match Ready ")]),(0,n.Lk)("button",{onClick:C,class:"retake-btn"},"Retake Photo")])):(0,n.Q3)("",!0),"train"===l.value&&u.value?((0,n.uX)(),(0,n.CE)("div",F,[a[7]||(a[7]=(0,n.Lk)("h3",null,"✓ Thank you!",-1)),a[8]||(a[8]=(0,n.Lk)("p",null,"Your training data has been submitted successfully.",-1)),(0,n.Lk)("button",{onClick:C,class:"action-btn primary"},"Take Another Photo")])):(0,n.Q3)("",!0)]))}});const U=(0,s.A)(D,[["__scopeId","data-v-e1fcfa34"]]);var I=U;const S=[{path:"/",name:"home",component:I}],Q=(0,b.aE)({history:(0,b.LA)("/Cricket-Ready-Ball-Classifier/"),routes:S});var V=Q;(0,t.Ef)(m).use(V).mount("#app")}},a={};function r(t){var n=a[t];if(void 0!==n)return n.exports;var o=a[t]={exports:{}};return e[t].call(o.exports,o,o.exports,r),o.exports}r.m=e,function(){var e=[];r.O=function(a,t,n,o){if(!t){var l=1/0;for(u=0;u<e.length;u++){t=e[u][0],n=e[u][1],o=e[u][2];for(var i=!0,s=0;s<t.length;s++)(!1&o||l>=o)&&Object.keys(r.O).every(function(e){return r.O[e](t[s])})?t.splice(s--,1):(i=!1,o<l&&(l=o));if(i){e.splice(u--,1);var c=n();void 0!==c&&(a=c)}}return a}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[t,n,o]}}(),function(){r.d=function(e,a){for(var t in a)r.o(a,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){r.p="/Cricket-Ready-Ball-Classifier/"}(),function(){var e={524:0};r.O.j=function(a){return 0===e[a]};var a=function(a,t){var n,o,l=t[0],i=t[1],s=t[2],c=0;if(l.some(function(a){return 0!==e[a]})){for(n in i)r.o(i,n)&&(r.m[n]=i[n]);if(s)var u=s(r)}for(a&&a(t);c<l.length;c++)o=l[c],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(u)},t=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))}();var t=r.O(void 0,[96],function(){return r(7716)});t=r.O(t)})();