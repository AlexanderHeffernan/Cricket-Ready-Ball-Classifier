(function(){"use strict";var e={3604:function(e,a,t){var r=t(3751),n=t(641);const o={class:"app-container"};function l(e,a){const t=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)(n.FK,null,[a[0]||(a[0]=(0,n.Lk)("div",{class:"background-image"},null,-1)),a[1]||(a[1]=(0,n.Lk)("div",{class:"background-overlay"},null,-1)),(0,n.Lk)("div",o,[(0,n.bF)(t)])],64)}var i=t(6262);const s={},c=(0,i.A)(s,[["render",l]]);var u=c,d=t(3723);(0,d.k)("/Cricket-Ready-Ball-Classifier/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var v=t(5220),p=t(33),g=t(953);t(8111),t(7588);const h={class:"camera-capture"},k={class:"camera-container"},f={key:0,class:"captured-overlay"},m=["src"],y={key:0,class:"loading-spinner"},b={key:0,class:"capture-container"},w=["disabled"];var C=(0,n.pM)({__name:"CameraComponent",props:{isLoading:{type:Boolean,default:!1},loadingText:{default:"Processing..."},glowClass:{default:""}},emits:["captured","error"],setup(e,{expose:a,emit:t}){const r=t,o=(0,g.KR)(),l=(0,g.KR)(),i=(0,g.KR)(null),s=(0,g.KR)(null);(0,n.sV)(()=>{c()});const c=async()=>{try{const e="https:"===location.protocol||"localhost"===location.hostname;if(!e)return void r("error","Camera access requires HTTPS or localhost.");if(!navigator.mediaDevices?.getUserMedia)return void r("error","Camera not supported in this browser.");const a=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}}});s.value=a,o.value&&(o.value.srcObject=a,o.value.setAttribute("playsinline","true"),await o.value.play())}catch(e){console.error("Camera initialization error:",e);const a=e,t={NotAllowedError:"Camera access denied. Please allow permissions.",NotFoundError:"No camera found.",NotSupportedError:"Camera requires HTTPS."};r("error",t[a.name]||`Failed to access camera: ${a.message}`)}},u=async()=>{if(!o.value||!l.value)return;const e=l.value,a=o.value,t=e.getContext("2d");if(!t)return;const n=a.getBoundingClientRect(),s=Math.min(n.width,n.height),c=s/2,u=a.videoWidth/n.width,d=a.videoHeight/n.height,v=c*Math.min(u,d),p=2*v;e.width=p,e.height=p,t.clearRect(0,0,p,p),t.save(),t.beginPath(),t.arc(p/2,p/2,v,0,2*Math.PI),t.clip(),t.drawImage(a,a.videoWidth/2-v,a.videoHeight/2-v,p,p,0,0,p,p),t.restore();const g=e.toDataURL("image/png");i.value=g,r("captured",e,g)},d=()=>{i.value=null};return(0,n.hi)(()=>{s.value?.getTracks().forEach(e=>e.stop())}),a({reset:d}),(e,a)=>((0,n.uX)(),(0,n.CE)("div",h,[(0,n.Lk)("div",k,[(0,n.Lk)("video",{ref_key:"cameraStream",ref:o,id:"camera-stream",muted:"",playsinline:"","webkit-playsinline":"true","x-website-airplay":"deny",preload:"auto",class:(0,p.C4)({hidden:i.value})},null,2),i.value?((0,n.uX)(),(0,n.CE)("div",f,[(0,n.Lk)("img",{src:i.value,alt:"Captured Image",class:"captured-image-overlay"},null,8,m),e.isLoading?((0,n.uX)(),(0,n.CE)("div",y,[a[0]||(a[0]=(0,n.Lk)("div",{class:"spinner"},null,-1)),(0,n.Lk)("p",null,(0,p.v_)(e.loadingText),1)])):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0),e.glowClass?((0,n.uX)(),(0,n.CE)("div",{key:1,class:(0,p.C4)(["glow-effect",e.glowClass])},null,2)):(0,n.Q3)("",!0)]),(0,n.Lk)("canvas",{ref_key:"cameraCanvas",ref:l,style:{display:"none"}},null,512),i.value?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",b,[(0,n.Lk)("button",{onClick:u,class:"capture-button",disabled:e.isLoading},(0,p.v_)(e.isLoading?e.loadingText:"Capture Photo"),9,w)]))]))}});const L=(0,i.A)(C,[["__scopeId","data-v-ea7aa100"]]);var E=L;const R={class:"cricket-view"},T={class:"mode-selector"},P={class:"prediction-result"},_={class:"confidence-text"},x={key:1,class:"label-container"},O={class:"label-buttons"},j={key:2,class:"success-container"},A={key:3,class:"error-container"},K={class:"error-text"};var M=(0,n.pM)({__name:"PredictView",setup(e){const a=(0,g.KR)("predict"),t=(0,g.KR)(!1),r=(0,g.KR)(null),o=(0,g.KR)(null),l=(0,g.KR)(!1),i=(0,g.KR)(null),s=(0,g.KR)(),c=(0,g.KR)(),u=(0,n.EW)(()=>"predict"===a.value?"Take a photo and we will determine if your ball is match ready.":"Help improve our classifier by taking photos and labeling them."),d=(0,n.EW)(()=>"predict"===a.value?"Analyzing...":"Submitting..."),v=(0,n.EW)(()=>"predict"===a.value&&o.value?"match_ready"===o.value.prediction?"match-ready":"not-match-ready":""),h=async()=>{await(0,n.dY)(),c.value&&c.value.scrollIntoView({behavior:"smooth",block:"start"})},k=(e,t)=>{i.value={canvas:e,imageDataUrl:t},"predict"===a.value&&m(e)},f=e=>{r.value=e},m=async e=>{try{t.value=!0,r.value=null;const a=await new Promise(a=>{e.toBlob(e=>{e&&a(e)},"image/jpeg",.8)}),n=new FormData;n.append("image",a,"captured-image.jpg");const l=await fetch("https://meerkat-flowing-blatantly.ngrok-free.app/predict",{method:"POST",headers:{"ngrok-skip-browser-warning":"true"},body:n});if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);o.value=await l.json(),await h()}catch(a){console.error("Prediction error:",r);const e=a;"TypeError"===e.name&&e.message.includes("Load failed")?r.value="Backend service unavailable. Please try again later.":r.value="Failed to analyze image. Please try again."}finally{t.value=!1}},y=async e=>{if(i.value)try{t.value=!0,r.value=null;const a=await new Promise(e=>{i.value&&i.value.canvas.toBlob(a=>{a&&e(a)},"image/jpeg",.8)}),n=new FormData;n.append("image",a,"training-image.jpg"),n.append("label",e);const o=await fetch("https://meerkat-flowing-blatantly.ngrok-free.app/training",{method:"POST",headers:{"ngrok-skip-browser-warning":"true"},body:n});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);l.value=!0}catch(a){console.error("Training error:",r);const e=a;"TypeError"===e.name&&e.message.includes("Load failed")?r.value="Backend service unavailable. Please try again later.":r.value="Failed to submit training data. Please try again."}finally{t.value=!1}},b=()=>{i.value=null,o.value=null,l.value=!1,r.value=null,t.value=!1,s.value?.reset()},w=()=>{"predict"===a.value&&i.value?m(i.value.canvas):r.value=null},C=()=>{i.value&&m(i.value.canvas)};return(e,g)=>((0,n.uX)(),(0,n.CE)("div",R,[(0,n.Lk)("div",T,[(0,n.Lk)("button",{onClick:g[0]||(g[0]=e=>a.value="predict"),class:(0,p.C4)({active:"predict"===a.value})}," Predict ",2),(0,n.Lk)("button",{onClick:g[1]||(g[1]=e=>a.value="train"),class:(0,p.C4)({active:"train"===a.value})}," Train ",2)]),(0,n.Lk)("h1",null,(0,p.v_)("predict"===a.value?"Is your ball Cricket-Ready?":"Training Tool"),1),(0,n.Lk)("p",null,(0,p.v_)(u.value),1),(0,n.bF)(E,{"is-loading":t.value,"loading-text":d.value,"glow-class":v.value,onCaptured:k,onError:f,ref_key:"camera",ref:s},null,8,["is-loading","loading-text","glow-class"]),"predict"===a.value&&o.value?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"result-container",ref_key:"resultContainer",ref:c},[g[5]||(g[5]=(0,n.Lk)("h2",null,"Result:",-1)),(0,n.Lk)("div",P,[(0,n.Lk)("p",{class:(0,p.C4)(["prediction-text",o.value.prediction])},[g[4]||(g[4]=(0,n.eW)(" Your ball is: ")),(0,n.Lk)("strong",null,(0,p.v_)("match_ready"===o.value.prediction?"Match Ready":"Not Match Ready"),1)],2),(0,n.Lk)("p",_," Confidence: "+(0,p.v_)(Math.round(100*o.value.confidence))+"% ",1)]),(0,n.Lk)("div",{class:"action-buttons"},[(0,n.Lk)("button",{onClick:b,class:"action-btn primary"},"Take Another Photo"),(0,n.Lk)("button",{onClick:C,class:"action-btn secondary"},"Retry Analysis")])],512)):(0,n.Q3)("",!0),"train"===a.value&&i.value&&!l.value?((0,n.uX)(),(0,n.CE)("div",x,[g[6]||(g[6]=(0,n.Lk)("h3",null,"Is this ball match-ready?",-1)),(0,n.Lk)("div",O,[(0,n.Lk)("button",{onClick:g[2]||(g[2]=e=>y("match_ready")),class:"label-btn match-ready"}," ✓ Match Ready "),(0,n.Lk)("button",{onClick:g[3]||(g[3]=e=>y("not_match_ready")),class:"label-btn not-match-ready"}," ✗ Not Match Ready ")]),(0,n.Lk)("button",{onClick:b,class:"retake-btn"},"Retake Photo")])):(0,n.Q3)("",!0),"train"===a.value&&l.value?((0,n.uX)(),(0,n.CE)("div",j,[g[7]||(g[7]=(0,n.Lk)("h3",null,"✓ Thank you!",-1)),g[8]||(g[8]=(0,n.Lk)("p",null,"Your training data has been submitted successfully.",-1)),(0,n.Lk)("button",{onClick:b,class:"action-btn primary"},"Take Another Photo")])):(0,n.Q3)("",!0),r.value?((0,n.uX)(),(0,n.CE)("div",A,[(0,n.Lk)("p",K,(0,p.v_)(r.value),1),(0,n.Lk)("button",{onClick:w,class:"retry-btn"},"Retry")])):(0,n.Q3)("",!0)]))}});const F=(0,i.A)(M,[["__scopeId","data-v-fdeae180"]]);var X=F;const B=[{path:"/",name:"home",component:X}],N=(0,v.aE)({history:(0,v.LA)("/Cricket-Ready-Ball-Classifier/"),routes:B});var I=N;(0,r.Ef)(u).use(I).mount("#app")}},a={};function t(r){var n=a[r];if(void 0!==n)return n.exports;var o=a[r]={exports:{}};return e[r].call(o.exports,o,o.exports,t),o.exports}t.m=e,function(){var e=[];t.O=function(a,r,n,o){if(!r){var l=1/0;for(u=0;u<e.length;u++){r=e[u][0],n=e[u][1],o=e[u][2];for(var i=!0,s=0;s<r.length;s++)(!1&o||l>=o)&&Object.keys(t.O).every(function(e){return t.O[e](r[s])})?r.splice(s--,1):(i=!1,o<l&&(l=o));if(i){e.splice(u--,1);var c=n();void 0!==c&&(a=c)}}return a}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[r,n,o]}}(),function(){t.d=function(e,a){for(var r in a)t.o(a,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:a[r]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){var e={524:0};t.O.j=function(a){return 0===e[a]};var a=function(a,r){var n,o,l=r[0],i=r[1],s=r[2],c=0;if(l.some(function(a){return 0!==e[a]})){for(n in i)t.o(i,n)&&(t.m[n]=i[n]);if(s)var u=s(t)}for(a&&a(r);c<l.length;c++)o=l[c],t.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return t.O(u)},r=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];r.forEach(a.bind(null,0)),r.push=a.bind(null,r.push.bind(r))}();var r=t.O(void 0,[96],function(){return t(3604)});r=t.O(r)})();