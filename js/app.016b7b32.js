(function(){"use strict";var e={2937:function(e,a,r){var t=r(3751),n=r(641);const l={class:"app-container"};function o(e,a){const r=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)(n.FK,null,[a[0]||(a[0]=(0,n.Lk)("div",{class:"background-image"},null,-1)),a[1]||(a[1]=(0,n.Lk)("div",{class:"background-overlay"},null,-1)),(0,n.Lk)("div",l,[(0,n.bF)(r)])],64)}var i=r(6262);const s={},c=(0,i.A)(s,[["render",o]]);var u=c,d=r(3723);(0,d.k)("/Cricket-Ready-Ball-Classifier/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var v=r(5220),p=r(33),g=r(953);r(8111),r(7588);const h={class:"camera-capture"},k={class:"camera-container"},y={key:0,class:"captured-overlay"},f=["src"],m={key:0,class:"loading-spinner"},b={class:"error-content"},w={class:"error-message"},C={key:0,class:"capture-container"},R=["disabled"];var L=(0,n.pM)({__name:"CameraComponent",props:{isLoading:{type:Boolean,default:!1},loadingText:{default:"Processing..."},glowClass:{default:""},error:{},showRetry:{type:Boolean}},emits:["captured","error","retry"],setup(e,{expose:a,emit:r}){const t=e,l=r,o=(0,g.KR)(),i=(0,g.KR)(),s=(0,g.KR)(null),c=(0,g.KR)(null),u=(0,g.KR)(!1),d=(0,g.KR)(null),v=(0,g.KR)(null);(0,n.wB)(()=>t.error,e=>{v.value&&(clearTimeout(v.value),v.value=null),e?(d.value=e,u.value=!1,setTimeout(()=>{u.value=!0},50)):(u.value=!1,v.value=setTimeout(()=>{d.value=null},700))}),(0,n.sV)(()=>{L()});const L=async()=>{try{const e="https:"===location.protocol||"localhost"===location.hostname;if(!e)return void l("error","Camera access requires HTTPS or localhost.");if(!navigator.mediaDevices?.getUserMedia)return void l("error","Camera not supported in this browser.");const a=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}}});c.value=a,o.value&&(o.value.srcObject=a,o.value.setAttribute("playsinline","true"),await o.value.play())}catch(e){console.error("Camera initialization error:",e);const a=e,r={NotAllowedError:"Camera access denied. Please allow permissions.",NotFoundError:"No camera found.",NotSupportedError:"Camera requires HTTPS."};l("error",r[a.name]||`Failed to access camera: ${a.message}`)}},E=async()=>{if(!o.value||!i.value)return;const e=i.value,a=o.value,r=e.getContext("2d");if(!r)return;const t=a.getBoundingClientRect(),n=Math.min(t.width,t.height),c=n/2,u=a.videoWidth/t.width,d=a.videoHeight/t.height,v=c*Math.min(u,d),p=2*v;e.width=p,e.height=p,r.clearRect(0,0,p,p),r.save(),r.beginPath(),r.arc(p/2,p/2,v,0,2*Math.PI),r.clip(),r.drawImage(a,a.videoWidth/2-v,a.videoHeight/2-v,p,p,0,0,p,p),r.restore();const g=e.toDataURL("image/png");s.value=g,l("captured",e,g)},T=()=>{s.value=null};return(0,n.hi)(()=>{c.value?.getTracks().forEach(e=>e.stop()),v.value&&clearTimeout(v.value)}),a({reset:T}),(e,a)=>((0,n.uX)(),(0,n.CE)("div",h,[(0,n.Lk)("div",k,[(0,n.Lk)("video",{ref_key:"cameraStream",ref:o,id:"camera-stream",muted:"",playsinline:"","webkit-playsinline":"true","x-website-airplay":"deny",preload:"auto",class:(0,p.C4)({hidden:s.value})},null,2),s.value?((0,n.uX)(),(0,n.CE)("div",y,[(0,n.Lk)("img",{src:s.value,alt:"Captured Image",class:"captured-image-overlay"},null,8,f),e.isLoading?((0,n.uX)(),(0,n.CE)("div",m,[a[1]||(a[1]=(0,n.Lk)("div",{class:"spinner"},null,-1)),(0,n.Lk)("p",null,(0,p.v_)(e.loadingText),1)])):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0),d.value?((0,n.uX)(),(0,n.CE)("div",{key:1,class:(0,p.C4)(["error-overlay",{"error-animate":u.value}])},[(0,n.Lk)("div",b,[a[2]||(a[2]=(0,n.Lk)("div",{class:"error-icon"},"❌",-1)),(0,n.Lk)("p",w,(0,p.v_)(d.value),1)])],2)):(0,n.Q3)("",!0),e.glowClass?((0,n.uX)(),(0,n.CE)("div",{key:2,class:(0,p.C4)(["glow-effect",e.glowClass])},null,2)):(0,n.Q3)("",!0)]),(0,n.Lk)("canvas",{ref_key:"cameraCanvas",ref:i,style:{display:"none"}},null,512),!s.value||t.error?((0,n.uX)(),(0,n.CE)("div",C,[t.error?((0,n.uX)(),(0,n.CE)("button",{key:1,onClick:a[0]||(a[0]=a=>e.$emit("retry")),class:"retry-button"}," Retry ")):((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:E,class:"capture-button",disabled:e.isLoading},(0,p.v_)(e.isLoading?e.loadingText:"Capture Photo"),9,R))])):(0,n.Q3)("",!0)]))}});const E=(0,i.A)(L,[["__scopeId","data-v-814bf56e"]]);var T=E;const P={class:"cricket-view"},_={class:"mode-selector"},O={class:"prediction-result"},K={class:"confidence-text"},x={key:1,class:"label-container"},j={class:"label-buttons"},A={key:2,class:"success-container"};var M=(0,n.pM)({__name:"PredictView",setup(e){const a=(0,g.KR)("predict"),r=(0,g.KR)(!1),t=(0,g.KR)(null),l=(0,g.KR)(null),o=(0,g.KR)(!1),i=(0,g.KR)(null),s=(0,g.KR)(),c=(0,g.KR)(),u=(0,n.EW)(()=>"predict"===a.value?"Take a photo and we will determine if your ball is match ready.":"Help improve our classifier by taking photos and labeling them."),d=(0,n.EW)(()=>"predict"===a.value?"Analyzing...":"Submitting..."),v=(0,n.EW)(()=>"predict"===a.value&&l.value?"match_ready"===l.value.prediction?"match-ready":"not-match-ready":""),h=async()=>{await(0,n.dY)(),c.value&&c.value.scrollIntoView({behavior:"smooth",block:"start"})},k=(e,r)=>{i.value={canvas:e,imageDataUrl:r},"predict"===a.value&&f(e)},y=e=>{t.value=e},f=async e=>{try{r.value=!0,t.value=null;const a=await new Promise(a=>{e.toBlob(e=>{e&&a(e)},"image/jpeg",.8)}),n=new FormData;n.append("image",a,"captured-image.jpg");const o=await fetch("https://meetkat-flowing-blatantly.ngrok-free.app/predict",{method:"POST",headers:{"ngrok-skip-browser-warning":"true"},body:n});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);l.value=await o.json(),await h()}catch(a){console.error("Prediction error:",t);const e=a;"TypeError"===e.name&&e.message.includes("Load failed")?t.value="ERROR: Backend service unavailable. Please try again later.":t.value="ERROR: Failed to analyze image. Please try again."}finally{r.value=!1}},m=async e=>{if(i.value)try{r.value=!0,t.value=null;const a=await new Promise(e=>{i.value&&i.value.canvas.toBlob(a=>{a&&e(a)},"image/jpeg",.8)}),n=new FormData;n.append("image",a,"training-image.jpg"),n.append("label",e);const l=await fetch("https://meetkat-flowing-blatantly.ngrok-free.app/training",{method:"POST",headers:{"ngrok-skip-browser-warning":"true"},body:n});if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);o.value=!0}catch(a){console.error("Training error:",t);const e=a;"TypeError"===e.name&&e.message.includes("Load failed")?t.value="ERROR: Backend service unavailable. Please try again later.":t.value="ERROR: Failed to submit training data. Please try again."}finally{r.value=!1}},b=()=>{i.value=null,l.value=null,o.value=!1,t.value=null,r.value=!1,s.value?.reset()},w=()=>{t.value=null,"predict"===a.value&&i.value?f(i.value.canvas):a.value},C=()=>{i.value&&f(i.value.canvas)};return(e,g)=>((0,n.uX)(),(0,n.CE)("div",P,[(0,n.Lk)("div",_,[(0,n.Lk)("button",{onClick:g[0]||(g[0]=e=>a.value="predict"),class:(0,p.C4)({active:"predict"===a.value})}," Predict ",2),(0,n.Lk)("button",{onClick:g[1]||(g[1]=e=>a.value="train"),class:(0,p.C4)({active:"train"===a.value})}," Train ",2)]),(0,n.Lk)("h1",null,(0,p.v_)("predict"===a.value?"Is your ball Cricket-Ready?":"Training Tool"),1),(0,n.Lk)("p",null,(0,p.v_)(u.value),1),(0,n.bF)(T,{"is-loading":r.value,"loading-text":d.value,"glow-class":v.value,error:t.value,"show-retry":!!t.value,onCaptured:k,onError:y,onRetry:w,ref_key:"camera",ref:s},null,8,["is-loading","loading-text","glow-class","error","show-retry"]),"predict"===a.value&&l.value?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"result-container",ref_key:"resultContainer",ref:c},[g[5]||(g[5]=(0,n.Lk)("h2",null,"Result:",-1)),(0,n.Lk)("div",O,[(0,n.Lk)("p",{class:(0,p.C4)(["prediction-text",l.value.prediction])},[g[4]||(g[4]=(0,n.eW)(" Your ball is: ")),(0,n.Lk)("strong",null,(0,p.v_)("match_ready"===l.value.prediction?"Match Ready":"Not Match Ready"),1)],2),(0,n.Lk)("p",K," Confidence: "+(0,p.v_)(Math.round(100*l.value.confidence))+"% ",1)]),(0,n.Lk)("div",{class:"action-buttons"},[(0,n.Lk)("button",{onClick:b,class:"action-btn primary"},"Take Another Photo"),(0,n.Lk)("button",{onClick:C,class:"action-btn secondary"},"Retry Analysis")])],512)):(0,n.Q3)("",!0),"train"===a.value&&i.value&&!o.value?((0,n.uX)(),(0,n.CE)("div",x,[g[6]||(g[6]=(0,n.Lk)("h3",null,"Is this ball match-ready?",-1)),(0,n.Lk)("div",j,[(0,n.Lk)("button",{onClick:g[2]||(g[2]=e=>m("match_ready")),class:"label-btn match-ready"}," ✓ Match Ready "),(0,n.Lk)("button",{onClick:g[3]||(g[3]=e=>m("not_match_ready")),class:"label-btn not-match-ready"}," ✗ Not Match Ready ")]),(0,n.Lk)("button",{onClick:b,class:"retake-btn"},"Retake Photo")])):(0,n.Q3)("",!0),"train"===a.value&&o.value?((0,n.uX)(),(0,n.CE)("div",A,[g[7]||(g[7]=(0,n.Lk)("h3",null,"✓ Thank you!",-1)),g[8]||(g[8]=(0,n.Lk)("p",null,"Your training data has been submitted successfully.",-1)),(0,n.Lk)("button",{onClick:b,class:"action-btn primary"},"Take Another Photo")])):(0,n.Q3)("",!0)]))}});const X=(0,i.A)(M,[["__scopeId","data-v-7dfb0f16"]]);var F=X;const B=[{path:"/",name:"home",component:F}],N=(0,v.aE)({history:(0,v.LA)("/Cricket-Ready-Ball-Classifier/"),routes:B});var I=N;(0,t.Ef)(u).use(I).mount("#app")}},a={};function r(t){var n=a[t];if(void 0!==n)return n.exports;var l=a[t]={exports:{}};return e[t].call(l.exports,l,l.exports,r),l.exports}r.m=e,function(){var e=[];r.O=function(a,t,n,l){if(!t){var o=1/0;for(u=0;u<e.length;u++){t=e[u][0],n=e[u][1],l=e[u][2];for(var i=!0,s=0;s<t.length;s++)(!1&l||o>=l)&&Object.keys(r.O).every(function(e){return r.O[e](t[s])})?t.splice(s--,1):(i=!1,l<o&&(o=l));if(i){e.splice(u--,1);var c=n();void 0!==c&&(a=c)}}return a}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[t,n,l]}}(),function(){r.d=function(e,a){for(var t in a)r.o(a,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){var e={524:0};r.O.j=function(a){return 0===e[a]};var a=function(a,t){var n,l,o=t[0],i=t[1],s=t[2],c=0;if(o.some(function(a){return 0!==e[a]})){for(n in i)r.o(i,n)&&(r.m[n]=i[n]);if(s)var u=s(r)}for(a&&a(t);c<o.length;c++)l=o[c],r.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return r.O(u)},t=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))}();var t=r.O(void 0,[96],function(){return r(2937)});t=r.O(t)})();