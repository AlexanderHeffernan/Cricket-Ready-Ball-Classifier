(function(){"use strict";var e={5307:function(e,a,r){var t=r(3751),n=r(641),o=r(33);const l={class:"loading-animation",width:"150",height:"150",viewBox:"0 0 150 150"};function i(e,a){return(0,n.uX)(),(0,n.CE)("svg",l,a[0]||(a[0]=[(0,n.Fv)('<g transform="translate(45, 30)" data-v-34d9b2e4><rect x="15" y="10" width="6" height="65" rx="3" ry="3" fill="#000" data-v-34d9b2e4></rect><rect x="27" y="10" width="6" height="65" rx="3" ry="3" fill="#000" data-v-34d9b2e4></rect><rect x="39" y="10" width="6" height="65" rx="3" ry="3" fill="#000" data-v-34d9b2e4></rect><g id="bat-group" data-v-34d9b2e4><rect x="55" y="0" width="60" height="16" rx="3" ry="3" fill="#fff" stroke="#000" stroke-width="5" data-v-34d9b2e4></rect><rect x="40" y="4.5" width="18" height="7" rx="2" ry="2" fill="#fff" stroke="#000" stroke-width="5" data-v-34d9b2e4></rect></g><circle id="ball" cx="1" cy="37" r="7" fill="#fff" stroke="#000" stroke-width="5" data-v-34d9b2e4></circle></g>',1)]))}var s=r(6262);const c={},u=(0,s.A)(c,[["render",i],["__scopeId","data-v-34d9b2e4"]]);var d=u,v=r(953),g=r.p+"img/background.fcd33fbd.jpg";const p={class:"loading-icon"},h={class:"app-container"};var y=(0,n.pM)({__name:"App",setup(e){const a=(0,v.KR)(!1),r=(0,v.KR)(!1),t=(0,v.KR)(!1);function l(){a.value&&r.value&&(t.value=!0,document.documentElement.style.setProperty("--background-img",`url(${g})`))}function i(){r.value=!0,l()}return(0,n.sV)(()=>{const e=new window.Image;e.src=g,e.onload=()=>{a.value=!0,l()},navigator.mediaDevices.getUserMedia({video:!0}).then(()=>{}).catch(()=>{r.value=!0,l()})}),(e,a)=>{const r=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",{class:(0,o.C4)(["loading-overlay",{complete:t.value}])},[a[0]||(a[0]=(0,n.Lk)("div",{class:"slide left-slide"},null,-1)),a[1]||(a[1]=(0,n.Lk)("div",{class:"slide right-slide"},null,-1)),(0,n.Lk)("div",p,[(0,n.bF)(d)])],2),a[2]||(a[2]=(0,n.Lk)("div",{class:"background-image"},null,-1)),a[3]||(a[3]=(0,n.Lk)("div",{class:"background-overlay"},null,-1)),(0,n.Lk)("div",h,[(0,n.bF)(r,{onCameraReady:i})])])}}});const f=y;var m=f,k=r(3723);(0,k.k)("/Cricket-Ready-Ball-Classifier/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var b=r(5220);r(8111),r(7588);const w={class:"camera-capture"},C={class:"camera-container"},R={key:0,class:"captured-overlay"},L=["src"],E={key:1,class:"error-content"},P={class:"error-message"},_={key:0,class:"capture-container"},x=["disabled"];var T=(0,n.pM)({__name:"CameraComponent",props:{isLoading:{type:Boolean,default:!1},loadingText:{default:"Processing..."},glowClass:{default:""},error:{},showRetry:{type:Boolean}},emits:["captured","error","retry","ready"],setup(e,{expose:a,emit:r}){const t=e,l=r,i=(0,v.KR)(),s=(0,v.KR)(),c=(0,v.KR)(null),u=(0,v.KR)(null);(0,n.sV)(()=>{g(),i.value&&i.value.addEventListener("playing",()=>{l("ready")})});const g=async()=>{try{const e="https:"===location.protocol||"localhost"===location.hostname;if(!e)return void l("error","Camera access requires HTTPS or localhost.");if(!navigator.mediaDevices?.getUserMedia)return void l("error","Camera not supported in this browser.");const a=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}}});u.value=a,i.value&&(i.value.srcObject=a,i.value.setAttribute("playsinline","true"),await i.value.play())}catch(e){console.error("Camera initialization error:",e);const a=e,r={NotAllowedError:"Camera access denied. Please allow permissions.",NotFoundError:"No camera found.",NotSupportedError:"Camera requires HTTPS."};l("error",r[a.name]||`Failed to access camera: ${a.message}`)}},p=async()=>{if(!i.value||!s.value)return;const e=s.value,a=i.value,r=e.getContext("2d");if(!r)return;const t=a.getBoundingClientRect(),n=Math.min(t.width,t.height),o=n/2,u=a.videoWidth/t.width,d=a.videoHeight/t.height,v=o*Math.min(u,d),g=2*v;e.width=g,e.height=g,r.clearRect(0,0,g,g),r.save(),r.beginPath(),r.arc(g/2,g/2,v,0,2*Math.PI),r.clip(),r.drawImage(a,a.videoWidth/2-v,a.videoHeight/2-v,g,g,0,0,g,g),r.restore();const p=e.toDataURL("image/png");c.value=p,l("captured",e,p)},h=()=>{c.value=null};return(0,n.hi)(()=>{u.value?.getTracks().forEach(e=>e.stop())}),a({reset:h}),(e,a)=>((0,n.uX)(),(0,n.CE)("div",w,[(0,n.Lk)("div",C,[(0,n.Lk)("video",{ref_key:"cameraStream",ref:i,id:"camera-stream",muted:"",playsinline:"","webkit-playsinline":"true","x-website-airplay":"deny",preload:"auto",class:(0,o.C4)({hidden:c.value})},null,2),c.value?((0,n.uX)(),(0,n.CE)("div",R,[(0,n.Lk)("img",{src:c.value,alt:"Captured Image",class:"captured-image-overlay"},null,8,L)])):(0,n.Q3)("",!0),(0,n.Lk)("div",{class:(0,o.C4)(["overlay",{loading:e.isLoading,error:e.error}])},[e.isLoading?((0,n.uX)(),(0,n.Wv)(d,{key:0})):(0,n.Q3)("",!0),e.error?((0,n.uX)(),(0,n.CE)("div",E,[a[1]||(a[1]=(0,n.Lk)("div",{class:"error-icon"},"❌",-1)),(0,n.Lk)("p",P,(0,o.v_)(e.error),1)])):(0,n.Q3)("",!0)],2),e.glowClass?((0,n.uX)(),(0,n.CE)("div",{key:1,class:(0,o.C4)(["glow-effect",e.glowClass])},null,2)):(0,n.Q3)("",!0)]),(0,n.Lk)("canvas",{ref_key:"cameraCanvas",ref:s,style:{display:"none"}},null,512),!c.value||t.error?((0,n.uX)(),(0,n.CE)("div",_,[t.error?((0,n.uX)(),(0,n.CE)("button",{key:1,onClick:a[0]||(a[0]=a=>e.$emit("retry")),class:"retry-button"}," Retry ")):((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:p,class:"capture-button",disabled:e.isLoading},(0,o.v_)(e.isLoading?e.loadingText:"Capture Photo"),9,x))])):(0,n.Q3)("",!0)]))}});const O=(0,s.A)(T,[["__scopeId","data-v-e86783c8"]]);var K=O;const M={class:"cricket-view"},j={class:"mode-selector"},A={class:"prediction-result"},X={class:"confidence-text"},F={key:1,class:"label-container"},B={class:"label-buttons"},I={key:2,class:"success-container"};var N=(0,n.pM)({__name:"PredictView",emits:["camera-ready"],setup(e,{emit:a}){const r=a;function t(){r("camera-ready")}const l=(0,v.KR)("predict"),i=(0,v.KR)(!1),s=(0,v.KR)(null),c=(0,v.KR)(null),u=(0,v.KR)(!1),d=(0,v.KR)(null),g=(0,v.KR)(),p=(0,v.KR)(),h=(0,n.EW)(()=>"predict"===l.value?"Take a photo and we will determine if your ball is match ready.":"Help improve our classifier by taking photos and labeling them."),y=(0,n.EW)(()=>"predict"===l.value?"Analyzing...":"Submitting..."),f=(0,n.EW)(()=>"predict"===l.value&&c.value?"match_ready"===c.value.prediction?"match-ready":"not-match-ready":""),m=async()=>{await(0,n.dY)(),p.value&&p.value.scrollIntoView({behavior:"smooth",block:"start"})},k=(e,a)=>{d.value={canvas:e,imageDataUrl:a},"predict"===l.value&&w(e)},b=e=>{s.value=e},w=async e=>{try{i.value=!0,s.value=null;const a=await new Promise(a=>{e.toBlob(e=>{e&&a(e)},"image/jpeg",.8)}),r=new FormData;r.append("image",a,"captured-image.jpg");const t=await fetch("https://meerkat-flowing-blatantly.ngrok-free.app/predict",{method:"POST",headers:{"ngrok-skip-browser-warning":"true"},body:r});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);c.value=await t.json(),await m()}catch(a){console.error("Prediction error:",s);const e=a;"TypeError"===e.name&&e.message.includes("Load failed")?s.value="ERROR: Backend service unavailable. Please try again later.":s.value="ERROR: Failed to analyze image. Please try again."}finally{i.value=!1}},C=async e=>{if(d.value)try{i.value=!0,s.value=null;const a=await new Promise(e=>{d.value&&d.value.canvas.toBlob(a=>{a&&e(a)},"image/jpeg",.8)}),r=new FormData;r.append("image",a,"training-image.jpg"),r.append("label",e);const t=await fetch("https://meerkat-flowing-blatantly.ngrok-free.app/training",{method:"POST",headers:{"ngrok-skip-browser-warning":"true"},body:r});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);u.value=!0}catch(a){console.error("Training error:",s);const e=a;"TypeError"===e.name&&e.message.includes("Load failed")?s.value="ERROR: Backend service unavailable. Please try again later.":s.value="ERROR: Failed to submit training data. Please try again."}finally{i.value=!1}},R=()=>{d.value=null,c.value=null,u.value=!1,s.value=null,i.value=!1,g.value?.reset()},L=async()=>{s.value=null,await new Promise(e=>setTimeout(e,500)),"predict"===l.value&&d.value?w(d.value.canvas):l.value},E=()=>{d.value&&w(d.value.canvas)};return(e,a)=>((0,n.uX)(),(0,n.CE)("div",M,[(0,n.Lk)("div",j,[(0,n.Lk)("button",{onClick:a[0]||(a[0]=e=>l.value="predict"),class:(0,o.C4)({active:"predict"===l.value})}," Predict ",2),(0,n.Lk)("button",{onClick:a[1]||(a[1]=e=>l.value="train"),class:(0,o.C4)({active:"train"===l.value})}," Train ",2)]),(0,n.Lk)("h1",null,(0,o.v_)("predict"===l.value?"Is your ball Cricket-Ready?":"Training Tool"),1),(0,n.Lk)("p",null,(0,o.v_)(h.value),1),(0,n.bF)(K,{"is-loading":i.value,"loading-text":y.value,"glow-class":f.value,error:s.value,"show-retry":!!s.value,onCaptured:k,onError:b,onRetry:L,onReady:t,ref_key:"camera",ref:g},null,8,["is-loading","loading-text","glow-class","error","show-retry"]),"predict"===l.value&&c.value?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"result-container",ref_key:"resultContainer",ref:p},[a[5]||(a[5]=(0,n.Lk)("h2",null,"Result:",-1)),(0,n.Lk)("div",A,[(0,n.Lk)("p",{class:(0,o.C4)(["prediction-text",c.value.prediction])},[a[4]||(a[4]=(0,n.eW)(" Your ball is: ")),(0,n.Lk)("strong",null,(0,o.v_)("match_ready"===c.value.prediction?"Match Ready":"Not Match Ready"),1)],2),(0,n.Lk)("p",X," Confidence: "+(0,o.v_)(Math.round(100*c.value.confidence))+"% ",1)]),(0,n.Lk)("div",{class:"action-buttons"},[(0,n.Lk)("button",{onClick:R,class:"action-btn primary"},"Take Another Photo"),(0,n.Lk)("button",{onClick:E,class:"action-btn secondary"},"Retry Analysis")])],512)):(0,n.Q3)("",!0),"train"===l.value&&d.value&&!u.value?((0,n.uX)(),(0,n.CE)("div",F,[a[6]||(a[6]=(0,n.Lk)("h3",null,"Is this ball match-ready?",-1)),(0,n.Lk)("div",B,[(0,n.Lk)("button",{onClick:a[2]||(a[2]=e=>C("match_ready")),class:"label-btn match-ready"}," ✓ Match Ready "),(0,n.Lk)("button",{onClick:a[3]||(a[3]=e=>C("not_match_ready")),class:"label-btn not-match-ready"}," ✗ Not Match Ready ")]),(0,n.Lk)("button",{onClick:R,class:"retake-btn"},"Retake Photo")])):(0,n.Q3)("",!0),"train"===l.value&&u.value?((0,n.uX)(),(0,n.CE)("div",I,[a[7]||(a[7]=(0,n.Lk)("h3",null,"✓ Thank you!",-1)),a[8]||(a[8]=(0,n.Lk)("p",null,"Your training data has been submitted successfully.",-1)),(0,n.Lk)("button",{onClick:R,class:"action-btn primary"},"Take Another Photo")])):(0,n.Q3)("",!0)]))}});const Q=(0,s.A)(N,[["__scopeId","data-v-bf2496f0"]]);var S=Q;const D=[{path:"/",name:"home",component:S}],H=(0,b.aE)({history:(0,b.LA)("/Cricket-Ready-Ball-Classifier/"),routes:D});var W=H;(0,t.Ef)(m).use(W).mount("#app")}},a={};function r(t){var n=a[t];if(void 0!==n)return n.exports;var o=a[t]={exports:{}};return e[t].call(o.exports,o,o.exports,r),o.exports}r.m=e,function(){var e=[];r.O=function(a,t,n,o){if(!t){var l=1/0;for(u=0;u<e.length;u++){t=e[u][0],n=e[u][1],o=e[u][2];for(var i=!0,s=0;s<t.length;s++)(!1&o||l>=o)&&Object.keys(r.O).every(function(e){return r.O[e](t[s])})?t.splice(s--,1):(i=!1,o<l&&(l=o));if(i){e.splice(u--,1);var c=n();void 0!==c&&(a=c)}}return a}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[t,n,o]}}(),function(){r.d=function(e,a){for(var t in a)r.o(a,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){r.p="/Cricket-Ready-Ball-Classifier/"}(),function(){var e={524:0};r.O.j=function(a){return 0===e[a]};var a=function(a,t){var n,o,l=t[0],i=t[1],s=t[2],c=0;if(l.some(function(a){return 0!==e[a]})){for(n in i)r.o(i,n)&&(r.m[n]=i[n]);if(s)var u=s(r)}for(a&&a(t);c<l.length;c++)o=l[c],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(u)},t=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))}();var t=r.O(void 0,[96],function(){return r(5307)});t=r.O(t)})();